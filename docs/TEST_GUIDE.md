# 🧪 기능 테스트 가이드

이 문서는 구현된 기능들을 화면에서 테스트하는 방법을 안내합니다.

## 📋 테스트 전 준비사항

### 1. 환경 변수 확인

`.env` 파일이 프로젝트 루트에 있는지 확인하고, 다음 변수들이 설정되어 있는지 확인하세요:

```env
# Clerk 인증
NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY=...
CLERK_SECRET_KEY=...
NEXT_PUBLIC_CLERK_SIGN_IN_URL=/sign-in

# Supabase
NEXT_PUBLIC_SUPABASE_URL=...
NEXT_PUBLIC_SUPABASE_ANON_KEY=...
SUPABASE_SERVICE_ROLE_KEY=...
NEXT_PUBLIC_STORAGE_BUCKET=uploads
```

### 2. 개발 서버 실행

터미널에서 다음 명령어를 실행하세요:

```bash
pnpm dev
```

서버가 시작되면 브라우저에서 [http://localhost:3000](http://localhost:3000)을 열어주세요.

---

## ✅ 테스트 체크리스트

### 1. 기본 레이아웃 테스트

#### Desktop (1024px 이상)
- [ ] 왼쪽에 사이드바가 표시되는가? (244px 너비, "Instagram" 로고)
- [ ] 사이드바에 메뉴 항목이 표시되는가? (홈, 검색, 만들기, 활동, 프로필)
- [ ] 메인 콘텐츠 영역이 사이드바 오른쪽에 표시되는가?

#### Tablet (768px ~ 1023px)
- [ ] 사이드바가 아이콘만 표시되는가? (72px 너비, "IG" 로고)
- [ ] 메인 콘텐츠가 사이드바 오른쪽에 표시되는가?

#### Mobile (768px 미만)
- [ ] 상단에 헤더가 표시되는가? (60px 높이, Instagram 로고)
- [ ] 하단에 네비게이션 바가 표시되는가? (50px 높이, 5개 아이콘)
- [ ] 사이드바가 숨겨져 있는가?

### 2. 인증 테스트

- [ ] 로그인하지 않은 상태에서 홈 페이지 접근 가능한가?
- [ ] 사이드바/하단 네비게이션에서 "로그인" 버튼이 표시되는가?
- [ ] 로그인 버튼 클릭 시 Clerk 로그인 모달이 나타나는가?
- [ ] 회원가입/로그인 후 홈 페이지로 리다이렉트되는가?
- [ ] 로그인 후 사용자 정보가 Supabase에 동기화되는가?

### 3. 게시물 피드 테스트

- [ ] 홈 페이지에 게시물 목록이 표시되는가?
- [ ] 게시물이 없을 때 "아직 게시물이 없습니다" 메시지가 표시되는가?
- [ ] 게시물 카드가 올바르게 표시되는가?
  - [ ] 헤더 (프로필 이미지, 사용자명, 시간)
  - [ ] 이미지 (1:1 정사각형)
  - [ ] 액션 버튼 (좋아요, 댓글, 공유, 북마크)
  - [ ] 좋아요 수
  - [ ] 캡션
  - [ ] 댓글 미리보기

### 4. 무한 스크롤 테스트

- [ ] 초기 로딩 시 최대 10개 게시물이 표시되는가?
- [ ] 스크롤을 아래로 내리면 추가 게시물이 자동으로 로드되는가?
- [ ] 추가 게시물 로딩 중 Skeleton UI가 표시되는가?
- [ ] 모든 게시물을 불러온 후 "모든 게시물을 불러왔습니다" 메시지가 표시되는가?

### 5. 게시물 작성 테스트

#### 모달 열기
- [ ] 사이드바의 "만들기" 버튼 클릭 시 모달이 열리는가?
- [ ] 모바일 하단 네비게이션의 "만들기" 버튼 클릭 시 모달이 열리는가?

#### 이미지 업로드
- [ ] "컴퓨터에서 선택" 버튼 클릭 시 파일 선택 창이 열리는가?
- [ ] 이미지 파일을 드래그 앤 드롭할 수 있는가?
- [ ] 이미지 미리보기가 표시되는가?
- [ ] 이미지 제거 버튼이 작동하는가?
- [ ] 5MB 이상의 파일을 선택하면 에러 메시지가 표시되는가?
- [ ] 이미지가 아닌 파일을 선택하면 에러 메시지가 표시되는가?

#### 캡션 작성
- [ ] 캡션 입력 필드에 텍스트를 입력할 수 있는가?
- [ ] 글자 수가 실시간으로 표시되는가? (2,200자 이상일 때)
- [ ] 2,200자를 초과하면 입력이 막히는가?

#### 게시
- [ ] "게시" 버튼이 정상적으로 작동하는가?
- [ ] 게시물 업로드 중 로딩 상태가 표시되는가?
- [ ] 게시 성공 후 모달이 닫히는가?
- [ ] 게시물이 피드 최상단에 즉시 표시되는가?

### 6. 좋아요 기능 테스트

- [ ] 좋아요 버튼 클릭 시 하트 아이콘이 채워지는가?
- [ ] 좋아요 수가 즉시 증가하는가?
- [ ] 좋아요 취소 시 하트 아이콘이 비워지고 수가 감소하는가?
- [ ] 클릭 시 하트 애니메이션이 작동하는가? (scale 1.3 → 1)
- [ ] 모바일에서 이미지 더블탭 시 큰 하트 애니메이션이 나타나는가?
- [ ] 더블탭으로 좋아요가 추가되는가?

### 7. 댓글 기능 테스트

#### 댓글 작성
- [ ] PostCard 하단에 "댓글 달기..." 입력창이 표시되는가?
- [ ] 댓글을 입력하고 Enter 키로 제출할 수 있는가?
- [ ] "게시" 버튼으로 댓글을 작성할 수 있는가?
- [ ] 댓글 작성 후 댓글이 즉시 목록에 표시되는가?
- [ ] 댓글 수가 즉시 증가하는가?
- [ ] 최신 댓글이 최상단에 표시되는가?

#### 댓글 표시
- [ ] 최신 댓글 2개만 미리보기로 표시되는가?
- [ ] "댓글 N개 모두 보기" 링크가 표시되는가?
- [ ] 댓글이 없을 때는 아무것도 표시되지 않는가?

#### 댓글 삭제
- [ ] 본인 댓글에 마우스를 올리면 `⋯` 메뉴가 나타나는가?
- [ ] 메뉴 클릭 시 드롭다운이 표시되는가?
- [ ] "삭제" 버튼 클릭 시 댓글이 삭제되는가?
- [ ] 삭제 후 댓글 목록에서 제거되는가?
- [ ] 댓글 수가 감소하는가?
- [ ] 다른 사람의 댓글에는 삭제 메뉴가 표시되지 않는가?

### 8. 반응형 디자인 테스트

브라우저 개발자 도구(F12)를 열고 화면 크기를 조절하면서 테스트하세요:

- [ ] Desktop (1024px+): 사이드바 전체 표시, 게시물 중앙 정렬
- [ ] Tablet (768px~1023px): 아이콘만 표시, 게시물 전체 너비
- [ ] Mobile (<768px): 헤더/하단 네비게이션, 게시물 전체 너비

---

## 🐛 문제 해결

### 문제: 게시물이 보이지 않음
- **해결**: Supabase 데이터베이스에 게시물이 있는지 확인
- 게시물 작성 기능으로 직접 게시물을 만들어보세요

### 문제: 이미지 업로드 실패
- **해결**: Supabase Storage에 `uploads` 버킷이 생성되어 있는지 확인
- Supabase Dashboard → Storage → 버킷 확인

### 문제: 로그인 후 사용자 정보가 동기화되지 않음
- **해결**: `SyncUserProvider`가 정상 작동하는지 확인
- 브라우저 콘솔에서 에러 메시지 확인

### 문제: 댓글/좋아요가 작동하지 않음
- **해결**: 로그인 상태 확인
- 브라우저 콘솔에서 API 에러 확인

---

## 📝 테스트 시나리오

### 시나리오 1: 첫 방문자
1. 로그인하지 않은 상태로 홈 페이지 접속
2. 게시물 목록 확인 (없을 수도 있음)
3. 로그인 버튼 클릭
4. 회원가입 또는 로그인
5. 홈 페이지로 리다이렉트 확인

### 시나리오 2: 게시물 작성
1. 로그인 상태 확인
2. "만들기" 버튼 클릭
3. 이미지 선택 (또는 드래그 앤 드롭)
4. 캡션 입력 (선택사항)
5. "게시" 버튼 클릭
6. 피드에서 새 게시물 확인

### 시나리오 3: 상호작용
1. 게시물의 좋아요 버튼 클릭
2. 댓글 작성
3. 본인 댓글 삭제
4. 스크롤하여 추가 게시물 로드

---

## 💡 팁

- **브라우저 개발자 도구(F12)**를 열어 콘솔 로그를 확인하세요
- 모든 API 호출은 콘솔에 `console.group`으로 그룹화되어 표시됩니다
- 에러가 발생하면 콘솔의 빨간색 메시지를 확인하세요
- 네트워크 탭에서 API 요청/응답을 확인할 수 있습니다

---

## 📞 추가 도움

문제가 발생하면 다음을 확인하세요:
1. 브라우저 콘솔의 에러 메시지
2. 네트워크 탭의 API 요청 상태
3. 환경 변수 설정
4. Supabase Dashboard에서 데이터베이스 상태 확인

