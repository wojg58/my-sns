# 🏠 홈피드 화면 테스트 가이드

이 가이드는 인스타그램 홈피드 화면에 구현된 기능들을 테스트하는 방법을 단계별로 안내합니다.

---

## ✅ 준비 단계

### 1단계: 데이터베이스에 샘플 데이터 추가

**중요:** 게시물이 화면에 보이려면 Supabase 데이터베이스에 게시물 데이터가 있어야 합니다.

#### 방법 A: SQL 스크립트 사용 (빠름)

1. **Supabase SQL Editor 열기**
   - Supabase Dashboard → SQL Editor → New query

2. **스크립트 복사 및 실행**
   - `supabase/migrations/insert_sample_data.sql` 파일 열기
   - 전체 내용 복사 (Ctrl+A → Ctrl+C)
   - SQL Editor에 붙여넣기 (Ctrl+V)
   - "Run" 버튼 클릭 (또는 Ctrl+Enter)

3. **데이터 확인**
   ```sql
   SELECT COUNT(*) FROM public.posts;
   ```
   - 결과가 0보다 크면 성공!

#### 방법 B: 직접 게시물 작성 (추천)

1. 개발 서버 실행 (아래 2단계 참고)
2. 로그인
3. "만들기" 버튼 클릭
4. 이미지 업로드 및 게시
5. 홈피드에서 확인

---

### 2단계: 개발 서버 실행

터미널에서 다음 명령어를 실행하세요:

```bash
pnpm dev
```

**결과:**
- 서버가 시작되면 터미널에 다음과 같은 메시지가 표시됩니다:
  ```
  ▲ Next.js 15.5.6
  - Local:        http://localhost:3000
  ```

---

### 3단계: 브라우저에서 확인

1. **브라우저 열기**
   - Chrome, Edge, Firefox 등 어떤 브라우저든 가능

2. **주소 입력**
   - 주소창에 `http://localhost:3000` 입력
   - 또는 터미널의 링크를 클릭

3. **홈피드 확인**
   - 페이지가 로드되면 홈피드가 표시됩니다
   - 게시물이 있으면 카드 형태로 표시됩니다
   - 게시물이 없으면 "아직 게시물이 없습니다" 메시지가 표시됩니다

---

## 🎯 테스트 체크리스트

### ✅ 기본 화면 확인

- [ ] **레이아웃이 올바르게 표시되는가?**
  - Desktop: 왼쪽에 사이드바 (244px)
  - Tablet: 왼쪽에 아이콘만 사이드바 (72px)
  - Mobile: 상단 헤더 + 하단 네비게이션

- [ ] **게시물 카드가 표시되는가?**
  - 헤더 (프로필 이미지, 사용자명, 시간)
  - 이미지 (1:1 정사각형)
  - 액션 버튼 (좋아요, 댓글, 공유, 북마크)
  - 좋아요 수
  - 캡션
  - 댓글 미리보기

---

### ✅ 게시물 목록 확인

- [ ] **게시물이 시간 순서대로 표시되는가?** (최신순)
- [ ] **게시물이 여러 개 표시되는가?**
- [ ] **로딩 중 Skeleton UI가 표시되는가?** (처음 로드 시)
- [ ] **게시물이 없을 때 안내 메시지가 표시되는가?** ("아직 게시물이 없습니다")

---

### ✅ 무한 스크롤 확인

1. **스크롤 내리기**
   - 게시물 목록을 아래로 스크롤
   - 화면 하단에 도달하면 자동으로 추가 게시물 로드

2. **확인 사항**
   - [ ] 스크롤 시 추가 게시물이 자동으로 로드되는가?
   - [ ] 로딩 중 Skeleton UI가 표시되는가?
   - [ ] 모든 게시물을 불러온 후 "모든 게시물을 불러왔습니다" 메시지가 표시되는가?

---

### ✅ 좋아요 기능 확인

1. **좋아요 버튼 클릭**
   - 게시물의 하트 아이콘 클릭

2. **확인 사항**
   - [ ] 클릭 시 하트가 빨간색으로 채워지는가?
   - [ ] 좋아요 수가 즉시 증가하는가?
   - [ ] 클릭 시 하트 애니메이션이 작동하는가? (살짝 커졌다가 작아짐)

3. **좋아요 취소**
   - 다시 하트 클릭

4. **확인 사항**
   - [ ] 하트가 비워지고 좋아요 수가 감소하는가?

5. **더블탭 좋아요 (모바일)**
   - 모바일 화면에서 게시물 이미지를 빠르게 두 번 탭

6. **확인 사항**
   - [ ] 큰 하트 애니메이션이 나타나는가?
   - [ ] 좋아요가 추가되는가?

---

### ✅ 댓글 기능 확인

#### 댓글 작성

1. **댓글 입력**
   - 게시물 하단의 "댓글 달기..." 입력창 클릭
   - 댓글 입력 (예: "정말 멋져요!")
   - Enter 키 또는 "게시" 버튼 클릭

2. **확인 사항**
   - [ ] 댓글이 즉시 목록에 표시되는가?
   - [ ] 댓글 수가 증가하는가?
   - [ ] 최신 댓글이 최상단에 표시되는가?

#### 댓글 삭제

1. **삭제 메뉴 열기**
   - 본인이 작성한 댓글에 마우스를 올리면 `⋯` 메뉴 표시
   - 메뉴 클릭

2. **삭제 실행**
   - "삭제" 버튼 클릭

3. **확인 사항**
   - [ ] 댓글이 목록에서 제거되는가?
   - [ ] 댓글 수가 감소하는가?
   - [ ] 다른 사람의 댓글에는 삭제 메뉴가 표시되지 않는가?

---

### ✅ 게시물 작성 기능 확인

#### 모달 열기

1. **데스크톱/태블릿**
   - 사이드바의 "만들기" 버튼 클릭

2. **모바일**
   - 하단 네비게이션의 "만들기" 버튼 클릭

3. **확인 사항**
   - [ ] 모달이 열리는가?
   - [ ] 이미지 업로드 UI가 표시되는가?

#### 이미지 업로드

1. **이미지 선택**
   - "컴퓨터에서 선택" 버튼 클릭
   - 또는 이미지를 드래그 앤 드롭

2. **확인 사항**
   - [ ] 이미지 미리보기가 표시되는가?
   - [ ] 이미지 제거 버튼이 작동하는가?

3. **에러 처리**
   - 5MB 이상 파일 선택 시 에러 메시지 표시되는가?
   - 이미지가 아닌 파일 선택 시 에러 메시지 표시되는가?

#### 캡션 작성

1. **캡션 입력**
   - 캡션 입력 필드에 텍스트 입력
   - 글자 수 표시 확인 (2,200자 이상일 때)

2. **확인 사항**
   - [ ] 글자 수가 실시간으로 표시되는가?
   - [ ] 2,200자를 초과하면 입력이 막히는가?

#### 게시

1. **"게시" 버튼 클릭**
   - 로딩 상태 확인

2. **확인 사항**
   - [ ] 게시물 업로드 중 로딩 상태가 표시되는가?
   - [ ] 게시 성공 후 모달이 닫히는가?
   - [ ] 게시물이 피드 최상단에 즉시 표시되는가?

---

### ✅ 반응형 디자인 확인

브라우저 개발자 도구(F12)를 열고 화면 크기를 조절하면서 테스트하세요.

#### Desktop (1024px 이상)

- [ ] 사이드바가 전체 표시되는가? (244px, "Instagram" 로고)
- [ ] 게시물이 중앙 정렬되는가? (최대 너비 630px)

#### Tablet (768px ~ 1023px)

- [ ] 사이드바가 아이콘만 표시되는가? (72px, "IG" 로고)
- [ ] 게시물이 전체 너비로 표시되는가?

#### Mobile (768px 미만)

- [ ] 상단에 헤더가 표시되는가? (60px 높이)
- [ ] 하단에 네비게이션 바가 표시되는가? (50px 높이)
- [ ] 사이드바가 숨겨져 있는가?
- [ ] 게시물이 전체 너비로 표시되는가? (좌우 테두리 없음)

---

## 🐛 문제 해결

### 문제 1: 게시물이 보이지 않음

**원인:**
- 데이터베이스에 게시물이 없음
- API 에러 발생

**해결 방법:**

1. **데이터베이스 확인**
   ```sql
   SELECT COUNT(*) FROM public.posts;
   ```
   - 결과가 0이면 게시물이 없는 것입니다
   - `insert_sample_data.sql` 스크립트 실행하거나 직접 게시물 작성

2. **브라우저 콘솔 확인**
   - F12 키를 눌러 개발자 도구 열기
   - "Console" 탭에서 에러 메시지 확인
   - 빨간색 에러 메시지가 있으면 내용 확인

3. **네트워크 탭 확인**
   - 개발자 도구 → "Network" 탭
   - `/api/posts` 요청 확인
   - 상태 코드가 200이 아닌 경우 에러 확인

---

### 문제 2: 로딩 중 무한 로딩

**원인:**
- API 응답이 없음
- 네트워크 에러

**해결 방법:**

1. **서버 로그 확인**
   - 터미널에서 에러 메시지 확인
   - `[API] GET /api/posts` 관련 로그 확인

2. **환경 변수 확인**
   - `.env` 파일에 Supabase 설정이 올바른지 확인
   - `NEXT_PUBLIC_SUPABASE_URL`, `NEXT_PUBLIC_SUPABASE_ANON_KEY` 확인

3. **Supabase 연결 확인**
   - Supabase Dashboard에서 프로젝트 상태 확인
   - API 키가 올바른지 확인

---

### 문제 3: 이미지가 보이지 않음

**원인:**
- 이미지 URL이 잘못됨
- CORS 에러
- Storage 버킷 설정 문제

**해결 방법:**

1. **이미지 URL 확인**
   - 게시물 카드에서 이미지 URL 확인
   - 브라우저에서 직접 URL 열어보기

2. **Storage 버킷 확인**
   - Supabase Dashboard → Storage
   - `uploads` 버킷이 있는지 확인
   - 버킷이 공개(Public)로 설정되어 있는지 확인

---

### 문제 4: 좋아요/댓글이 작동하지 않음

**원인:**
- 로그인하지 않음
- 인증 에러

**해결 방법:**

1. **로그인 상태 확인**
   - 사이드바/하단 네비게이션에 프로필 아이콘이 표시되는가?
   - 로그인하지 않았다면 로그인 필요

2. **브라우저 콘솔 확인**
   - F12 → Console 탭
   - API 에러 메시지 확인

3. **Clerk 인증 확인**
   - Clerk Dashboard에서 사용자 상태 확인

---

### 문제 5: 게시물 작성 실패

**원인:**
- 파일 크기 초과
- Storage 업로드 실패
- 권한 문제

**해결 방법:**

1. **파일 크기 확인**
   - 5MB 이하인지 확인
   - 이미지 파일인지 확인 (jpg, png, gif 등)

2. **Storage 권한 확인**
   - Supabase Dashboard → Storage → `uploads` 버킷
   - 버킷 정책 확인
   - RLS가 비활성화되어 있는지 확인 (개발 환경)

3. **서버 로그 확인**
   - 터미널에서 `[API] POST /api/posts` 관련 로그 확인
   - 에러 메시지 확인

---

## 💡 테스트 팁

### 1. 브라우저 개발자 도구 활용

- **F12 키**를 눌러 개발자 도구 열기
- **Console 탭**: JavaScript 에러 및 로그 확인
- **Network 탭**: API 요청/응답 확인
- **Elements 탭**: HTML 구조 확인

### 2. 콘솔 로그 확인

모든 API 호출과 상태 변경은 콘솔에 로그로 표시됩니다:
- `[PostFeed] Fetching posts` - 게시물 가져오기
- `[API] GET /api/posts` - API 호출
- `[PostCard] Like toggle` - 좋아요 토글

### 3. 네트워크 요청 확인

Network 탭에서:
- 요청 상태 코드 확인 (200 = 성공)
- 응답 데이터 확인
- 에러 메시지 확인

---

## 📝 빠른 체크리스트

테스트를 시작하기 전에 다음을 확인하세요:

- [ ] `.env` 파일이 올바르게 설정되어 있는가?
- [ ] 개발 서버가 실행 중인가? (`pnpm dev`)
- [ ] 브라우저에서 `http://localhost:3000` 접속 가능한가?
- [ ] 데이터베이스에 게시물이 있는가?
- [ ] Supabase Storage 버킷이 생성되어 있는가?

---

## 🎉 성공 확인

다음이 모두 정상적으로 작동하면 성공입니다:

1. ✅ 홈피드에 게시물이 표시됨
2. ✅ 좋아요 버튼 클릭 시 하트가 채워짐
3. ✅ 댓글 작성 및 삭제가 작동함
4. ✅ 게시물 작성 모달이 열리고 게시가 가능함
5. ✅ 무한 스크롤이 작동함
6. ✅ 반응형 레이아웃이 올바르게 표시됨

---

## 📞 추가 도움

문제가 발생하면:

1. **브라우저 콘솔 확인** (F12 → Console)
2. **서버 로그 확인** (터미널)
3. **네트워크 탭 확인** (F12 → Network)
4. **환경 변수 확인** (`.env` 파일)

자세한 내용은 `docs/TEST_GUIDE.md`를 참고하세요.

